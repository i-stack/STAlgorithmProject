# Tagged Pointer

正常情况下，如果存储的整数只是一个 `NSInteger` 的普通变量，那么它所占用的内存是与 `CPU` 的位数有关：

> 1、在 `32` 位 `CPU` 下占 `4` 个字节，在 `64` 位 `CPU` 下是占 `8` 个字节。
>
> 2、而指针类型的大小通常也是与 `CPU` 位数相关，一个指针所占用的内存在 `32` 位 `CPU` 下为 `4` 个字节，在 `64` 位 `CPU` 下是占 `8` 个字节。

`NSNumber`、`NSDate` 一类的变量本身的值需要占用的内存大小常常不需要 `8` 个字节，拿整数来说，`4` 个字节所能表示的有符号整数就可以达到 `20` 多亿（注：2^31=2147483648，另外 1 位作为符号位)，对于绝大多数情况都是可以处理的。

`Tagged Pointer` 特点：

> 1、`Tagged Pointer` 专门用来存储小的对象，例如 `NSNumber` 和 `NSDate`;
> 
> 2、`Tagged Pointer` 指针的值不再是地址了，而是真正的值，它的内存并不存储在堆中，也不需要 `malloc` 和 `free`。
> 
> 3、在内存读取上有着 3 倍的效率，创建时比以前快 106 倍。
